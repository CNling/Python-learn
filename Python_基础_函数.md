# Python基础-3

## 函数（function）

### 简介

- 是一个对象
- 用来保存一些可执行代码，并且可以多次调用
- 创建

	- def 函数名([形参1，形参2 。。。]) : 代码块

- 函数中保存的代码需要调用才会执行

	- 调用：函数对象（）

- 用来实现某种功能

### 参数

- 形参（形式参数）

	- 在函数内部声明变量，但不赋值
	- 可以指定默认值
	- 函数内部对形参重新赋值，不会影响其他变量
	- 通过形参修改对象，会影响所有指向改对象的变量

- 实参（实际参数）

	- 在创建函数时，有形参，则在调用函数时，必须有实参
	- 传递方式

		- 位置

			- def fn(a, b, c):

				- fn(1, 2, 3)

					- a = 1, b = 2, c = 3

		- 关键字

			- def fn(a)

				- fn(a = 10)

		- 混合

			- 位置参数在前，关键字参数在后

	- 拆包

		- 传递实参时，在序列类型的参数前添加*或**，它自动将序列中的元素依次作为参数传递

			- def fn(a, b, c):

				- fn(*t)

					- t = (1,2,3)

				- fn(**d)

					- d  = {'a' = 10, 'b' = 20, 'c' = 30}

	- 可以传递任意类型的对象

- 不定长参数

	- *形参

		- 装包：获取到所有的实参，并保存到一个元组中

			- def fn(*a):

				- fn(1,2,3)

		- *形参后面的所有参数必须是关键字参数

			- def fn2(a,*b,c)

				- fn(1,2,3,c=4)

		- 如果形参前有一个*，则要求所有的实参必须以关键字参数进行传递

			- def fn3(*,a,b)

	- **形参

		- 接收其他关键字参数，并保存到一个字典中

			- def fn4(**a):

				- fn4(b=10,c=20)

					- key=参数名
					- value=参数值

### 返回值

- 是函数执行之后返回的结果
- return

	- 指定函数的返回值
	- 可以跟任意对象，包括函数

		- return fn()

	- 默认返回的是None
	- 一旦执行，直接结束函数

- fn1

	- 是函数对象

- fn1()

	- 调用函数，获取返回值

### 文档字符串(doc str)

- help(函数对象)

	- 查询python中函数的用法

		- help(print)

- def fn(a:int, b:bool, c:str) -> int:

	- 函数的说明

		- def fn():

### 作用域（scope）

- 变量生效的区域
- 全局作用域

	- 在程序执行时创建，程序结束时销毁
	- 函数以外的区域都是全局作用域
	- 全局变量

		- 可以被任意位置访问

- 函数作用域

	- 在函数被调用时创建，调用结束时销毁
	- 每调用一次产生一个新的作用域
	- 局部变量

		- 只能被函数内部访问

- 变量的查找

	- 一个作用域中的变量仅能被它下级作用域访问

- global 关键字

	- 声明函数内部使用的是全局变量

		- global a

### 命名空间（namespace）

- 变量存储的位置

	- 全局变量 --> 全局命名空间 -属于-> 全局作用域
	- 局部变量 --> 函数命名空间 -属于-> 函数作用域

- 是一个专门用来存储变量的字典
- locals()

	- 获取当前作用域的命名空间

		- scope = locals() ->{'k':'v'}

- 可以通过操作字典，来操作命名空间
- globals()

	- 在任意位置获取全局命名空间

		- global_scope = globals() -> {}

### 递归

- 自己引用自己

	- 从前有座山，山上有座庙，庙里有个老和尚和一个小和尚，老和尚在给小和尚讲故事，故事是：从前有座山，山上有座庙，庙里有个老和尚和一个小和尚，老和尚在给小和尚讲故事，故事是：、、、

- 无穷递归

	- def fn():

- 递归函数

	- 在函数中调用自己
	- 将一个大问题分解为若干个小问题，直到问题无法分解，就去解决问题
	- 要件

		- 基线条件

			- 可变分解的最小问题，若满足则递归停止执行

		- 递归条件

			- 将问题继续分解的条件

### 高阶函数

- 将函数作为参数，或将函数作为返回值
- 使用函数作为参数时，实际是将代码传递到了目标函数
- filter()

	- 从序列中过滤出符合条件的元素，并保存到一个新的序列中
	- 参数

		- 函数：根据该函数的功能过滤序列
		- 序列：可迭代的结构

	- 返回值

		- 过滤后的新序列

### 匿名函数（语法糖）

- lambda

	- 语法：lambda 参数列表 ：返回值

		- filter(lambda i: i % 2 == 0, l) -> [2,4,6,8.10]

- map（）

	- 对可迭代对象中的元素做指定的操作，并将其添加到一个新的对象中返回

		- map(lambda i : i + 1, l) -> [3, 5, 7, 9, 11]

- 一般作为filter()的参数使用

### sort()

- 默认比较列表中元素的大小
- 关键字参数:key

	- 需要接收一个函数作为参数，并以函数的返回值比较大小

- 改变原来的对象

### sorted()

- 比较任意序列中元素的大小
- 不会改变原来的对象，会返回一个新的对象

### 闭包

- 三要件

	- 需要函数嵌套
	- 内部函数作为返回值返回
	- 内部函数使用外部函数变量

### 装饰器

- 开闭原则（OCP）

	- 程序的设计，要求开放扩展功能，关闭对程序的修改

- 自动生成函数的函数
- 使用：@装饰器

	- 可同时调用多个装饰器，以穿衣服顺序展示，由内到外

*XMind: ZEN - Trial Version*